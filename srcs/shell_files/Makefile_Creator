#!/bin/bash 

#****************************************************************************#
#*																			*#
#*														:::		 ::::::::	*#
#*	Create_Makefile									  :+:	   :+:	  :+:	*#
#*													+:+ +:+			+:+		*#
#*	by: Belotte <belotte1355@gmail.com>			  +#+  +:+		 +#+		*#
#*												+#+#+#+#+#+	  +#+			*#
#*	Created: 2015/06/20 15:02:47 by Belotte			 #+#	#+#				*#
#*	Updated: 2015/06/20 15:02:47 by Belotte			 ###  ########.fr		*#
#*																			*#
#****************************************************************************#

s_dir='srcs/'
i_dir='-I includes/'
main='main.c'
files=`ls srcs/*.c 2> /dev/null | cut -d'/' -f2 | tr '\n' ' '`
if [[ $files == "" ]]; then
	files=`ls *.c | tr '\n' ' '`
	s_dir=''
	i_dir=''
	main=''
fi

echo 'NAME	= run
CC		= gcc
S_DIR	= '"$s_dir"'
I_DIR	= -I /Volumes/HDD/Drive/Programmes/C/Lib/includes '"$i_dir"'
LIB		= /Volumes/HDD/Drive/Programmes/C/Lib/libft.a
FLAGS	= -Wall -Wextra -Werror $(I_DIR)
FILES	= '"$files"'
SRC		= $(addprefix $(S_DIR),$(FILES))
OBJS	= $(FILES:.c=.o)
RM		= rm -f

all: 		$(NAME)

$(NAME): 	$(OBJS)
	#ar rc $(NAME) $(OBJS)
	#ranlib $(NAME)
	$(CC) $(FLAGS) $(LIB) $^ '"$main"' -o $@
	@make clean
	@echo "Done."

%.o:		$(S_DIR)%.c
	$(CC) -c $(FLAGS) $<

clean:
	@$(RM) $(OBJS)

fclean: 	clean
	@$(RM) $(NAME)
	@echo "Clear."

re:			fclean all' > Makefile
